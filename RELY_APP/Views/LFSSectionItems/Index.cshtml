@model RELY_APP.ViewModel.LFSSectionItemViewModel

@{
    
    var ValidData = Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.ValidData);
    var ErrorData = Newtonsoft.Json.JsonConvert.SerializeObject(ViewBag.ErrorData);
}

    <div class="boxes">

        <a class="top_links" href="#" id="FileUpload" onclick="fileupload()">Upload </a>
        <a class="top_links" href="#" id="csvExport" onclick="DownloadSectionItems()">Download </a>
        <a class="top_links" href="#" id="DownloadTemplate" onclick="DownloadTemplate();">Download Template </a>
        <div id="jqxgrid">
        </div>
    </div>
@Scripts.Render("~/bundles/jqxgridbundle")
<div id="dialog" style="display: none;width:100%" align="center">

    @Html.Partial("_UploadDocuments", (RELY_APP.ViewModel.FileUploaderParametersViewModel)ViewBag.FileUploaderParameters)
</div>

@Scripts.Render("~/bundles/jQuery-File-Upload")
<script type="text/javascript" scr="~/Scripts/jquery-ui.js"></script>
<link href="~/Content/styles/jquery-ui.css" rel="stylesheet" type="text/css" />
<script>
  // $.noConflict();
      $(function () {
            $("#dialog").dialog({
                modal: true,
                autoOpen: false,
                title: "FileUpload Dialog Box",
                width: 900,
                height: 500,
               //position: 'center',

            });
            $("#FileUpload").click(function () {
                $('#dialog').dialog('open');
            });
     });
</script>

<script type="text/javascript">

    var IsHideButton=@ViewBag.HideButton;

   //var IsHideButton=1;
     var datafieldsForValid = new Array();
    var columnsForValid = new Array();
     var datafieldsforError = new Array();
    var columnsforError = new Array();

    $(document).ready(function () {
    var ValidDataGrid=@Html.Raw(Json.Encode(ValidData));
    var ErrorDataGrid=@Html.Raw(Json.Encode(ErrorData));

        $("#jqxgridInvalidRecords").hide();
       $("#jqxgridValidRecords").hide();
          $("#HeadingValid").hide();
         $("#HeadingInValid").hide();
   if(IsHideButton==1)
    {
     $("#HeadingValid").show();
         $("#HeadingInValid").show();
     $("#HeadingValid").show();
       $("#jqxgridInvalidRecords").show();
       $("#jqxgridValidRecords").show();
     $("#btnSaveValidRecords").show();
    // $('#btnSubmit').prop('disabled',true);
    }
    else
    {
           //$("#jqxgridInvalidRecords").hide();
      // $("#jqxgridValidRecords").hide();
     // $("#HeadingInValid").show();
      //  $("#VallidInvalidGrid").show();

      $("#btnSaveValidRecords").hide();
    }

        //Valid Grid and Invalid Grid Coding
        var source = {
            dataType: "json",
            cache:false,
            dataFields: [
                { name: 'Id', type: 'string' },
               // { name: 'SurveyId', type: 'string' },
                { name: 'Survey', type: 'string' },
                { name: 'ChapterCode', type: 'string' },
                { name: 'SectionCode', type: 'string' },
                { name: 'QuestionCode', type: 'string' },
                { name: 'TableCode', type: 'string' },
               // { name: 'ItemTypeId', type: 'string' },
                { name: 'ItemTypeName', type: 'string' },
            
                { name: 'ItemText', type: 'string' },
                { name: 'Ordinal', type: 'string' },
                { name: 'NestingLevel', type: 'string' },
                { name: 'IsResponseMandatory', type: 'string' },
                { name: 'IsReponseAutoGenerated', type: 'string' },
                { name: 'ShowOnQuestionCode', type: 'string' },
                { name: 'ShowOnAnswerOption', type: 'string' },
                { name: 'SumOfQuestions', type: 'string' },
                { name: 'Operator', type: 'string' },
                { name: 'SumValue', type: 'string' },
                { name: 'AutomatedResponseTrueValue', type: 'string' },
                { name: 'AutomatedResponseFalseValue', type: 'string' },
                { name: 'RelatedQuestionCode', type: 'string' },
                { name: 'ShowOnAccountingMemo', type: 'string' },
                { name: 'InternalNotes', type: 'string' },
                { name: 'UploadedOn', type: 'string' },
                { name: 'CreatedBy', type: 'string' },
                { name: 'UpdatedBy', type: 'string' },
                { name: 'CreatedDateTime', type: 'date' },
                { name: 'UpdatedDateTime', type: 'date' },

            ],

            id: "Id",
           localdata:ValidDataGrid
        };

          var dataAdapter = new $.jqx.dataAdapter(source);

                $('#jqxgridValidRecords').jqxGrid({
                    source: dataAdapter,
                    width: '100%',
                    autoheight: true,
                    theme: 'bootstrap',
                    sortable: true,
                    columnsresize: true,
                    columnsreorder: true,
                    altrows: true,
                    pageable: true,
                    filterable: true,
                    autoshowcolumnsmenubutton: false,//down arrow always visible for filter and sorting
                   // selectionmode: 'checkbox',
                    showstatusbar: false,
                    ready: function () {
                    },
                    columns: [
                        //{ text: 'Id#', datafield: 'Id' },

                        
                        //{ text: 'SurveyId', datafield: 'SurveyId', width: 100},
                       { text: 'Survey', datafield: 'Survey', width: 100},
                        { text: 'ChapterCode', datafield: 'ChapterCode', width: 100},
                        { text: 'SectionCode', datafield: 'SectionCode', width: 100},
                        { text: 'QuestionCode', datafield: 'QuestionCode', width: 100 },
                        { text: 'TableCode', datafield: 'TableCode', width: 100 },
                       // { text: 'ItemTypeId', datafield: 'ItemTypeId', width: 100 },
                        { text: 'ItemTypeName', datafield: 'ItemTypeName', width: 100 },
                        { text: 'ItemText', datafield: 'ItemText', width: 100},
                        { text: 'Ordinal', datafield: 'Ordinal', width: 100 },
                        { text: 'NestingLevel', datafield: 'NestingLevel', width: 100},
                        { text: 'IsResponseMandatory', datafield: 'IsResponseMandatory', width: 100 },
                        { text: 'IsReponseAutoGenerated', datafield: 'IsReponseAutoGenerated', width: 100 },
                        { text: 'ShowOnQuestionCode', datafield: 'ShowOnQuestionCode', width: 100},
                        { text: 'ShowOnAnswerOption', datafield: 'ShowOnAnswerOption', width: 100 },
                        { text: 'SumOfQuestions', datafield: 'SumOfQuestions', width: 100 },
                        { text: 'Operator', datafield: 'Operator', width: 100 },
                        { text: 'SumValue', datafield: 'SumValue', width: 100 },
                        { text: 'AutomatedResponseTrueValue', datafield: 'AutomatedResponseTrueValue', width: 100 },
                        { text: 'AutomatedResponseFalseValue', datafield: 'AutomatedResponseFalseValue', width: 100},
                        { text: 'RelatedQuestionCode', datafield: 'RelatedQuestionCode', width: 100 },
                        { text: 'ShowOnAccountingMemo', datafield: 'ShowOnAccountingMemo', width: 100 },
                        { text: 'InternalNotes', datafield: 'InternalNotes', width: 100 },
                        //{ text: 'CreatedBy', datafield: 'CreatedBy' },
                       // { text: 'Uploaded On', datafield: 'CreatedDateTime', width: 120, cellsformat: 'dd/MM/yyyy' },
                        //{ text: 'UpdatedBy', datafield: 'UPdatedBy' },
                        //{ text: 'Updated DateTime', datafield: 'UpdatedDateTime', cellsformat: 'dd/MM/yyyy' },

                    ]
                });

        //===============================================For error
         var source = {
             dataType: "json",
             cache : false,
            dataFields: [
                { name: 'Id', type: 'string' },
               
               // { name: 'SurveyId', type: 'string' },
               { name: 'Survey', type: 'string' },
                { name: 'ChapterCode', type: 'string' },
                { name: 'SectionCode', type: 'string' },
                { name: 'QuestionCode', type: 'string' },
                { name: 'TableCode', type: 'string' },
               // { name: 'ItemTypeId', type: 'string' },
               { name: 'ItemTypeName', type: 'string' },
                { name: 'ItemText', type: 'string' },
                { name: 'Ordinal', type: 'string' },
                { name: 'NestingLevel', type: 'string' },
                { name: 'IsResponseMandatory', type: 'string' },
                { name: 'IsReponseAutoGenerated', type: 'string' },
                { name: 'ShowOnQuestionCode', type: 'string' },
                { name: 'ShowOnAnswerOption', type: 'string' },
                { name: 'SumOfQuestions', type: 'string' },
                { name: 'Operator', type: 'string' },
                { name: 'SumValue', type: 'string' },
                { name: 'AutomatedResponseTrueValue', type: 'string' },
                { name: 'AutomatedResponseFalseValue', type: 'string' },
                { name: 'RelatedQuestionCode', type: 'string' },
                { name: 'ShowOnAccountingMemo', type: 'string' },
                { name: 'InternalNotes', type: 'string' },
                { name: 'CreatedBy', type: 'string' },
                { name: 'UpdatedBy', type: 'string' },
                { name: 'CreatedDateTime', type: 'date' },
                { name: 'UpdatedDateTime', type: 'date' },
                { name: 'SrNo', type: 'int' },
                { name: 'ValidationMessage', type: 'string' },
            ],
            localdata:ErrorDataGrid
        };
     var dataAdapter = new $.jqx.dataAdapter(source);

                $('#jqxgridInvalidRecords').jqxGrid({
                    source: dataAdapter,
                    width: '100%',
                    autoheight: true,
                    theme: 'bootstrap',
                    sortable: true,
                    columnsresize: true,
                    columnsreorder: true,
                    altrows: true,
                    pageable: true,
                    filterable: true,
                    autoshowcolumnsmenubutton: false,//down arrow always visible for filter and sorting
                   // selectionmode: 'checkbox',
                    showstatusbar: false,
                    ready: function () {
                    },
                    columns: [
                        //{ text: 'Id#', datafield: 'Id' },
                        { text: 'Row No.', datafield: 'SrNo' },
                        { text: 'Validation Message', datafield: 'ValidationMessage' },
                      //  { text: 'SurveyId', datafield: 'SurveyId', width: 100 },
                        { text: 'Survey', datafield: 'Survey', width: 100 },
                        { text: 'ChapterCode', datafield: 'ChapterCode', width: 100 },
                        { text: 'SectionCode', datafield: 'SectionCode', width: 100 },
                        { text: 'QuestionCode', datafield: 'QuestionCode', width: 100 },
                        { text: 'TableCode', datafield: 'TableCode', width: 100 },
                        //{ text: 'ItemTypeId', datafield: 'ItemTypeId', width: 100 },
                        { text: 'ItemTypeName', datafield: 'ItemTypeName', width: 100 },
                        { text: 'ItemText', datafield: 'ItemText', width: 100 },
                        { text: 'Ordinal', datafield: 'Ordinal', width: 100 },
                        { text: 'NestingLevel', datafield: 'NestingLevel', width: 100 },
                        { text: 'IsResponseMandatory', datafield: 'IsResponseMandatory', width: 100 },
                        { text: 'IsReponseAutoGenerated', datafield: 'IsReponseAutoGenerated', width: 100 },
                        { text: 'ShowOnQuestionCode', datafield: 'ShowOnQuestionCode', width: 100 },
                        { text: 'ShowOnAnswerOption', datafield: 'ShowOnAnswerOption', width: 100 },
                        { text: 'SumOfQuestions', datafield: 'SumOfQuestions', width: 100 },
                        { text: 'Operator', datafield: 'Operator', width: 100 },
                        { text: 'SumValue', datafield: 'SumValue', width: 100 },
                        { text: 'AutomatedResponseTrueValue', datafield: 'AutomatedResponseTrueValue', width: 100 },
                        { text: 'AutomatedResponseFalseValue', datafield: 'AutomatedResponseFalseValue', width: 100 },
                        { text: 'RelatedQuestionCode', datafield: 'RelatedQuestionCode', width: 100 },
                        { text: 'ShowOnAccountingMemo', datafield: 'ShowOnAccountingMemo', width: 100 },
                        { text: 'InternalNotes', datafield: 'InternalNotes', width: 100 },
                        
                        //{ text: 'CreatedBy', datafield: 'CreatedBy' },
                     //   { text: 'Uploaded On', datafield: 'CreatedDateTime', width: 120, cellsformat: 'dd/MM/yyyy' },
                        //{ text: 'UpdatedBy', datafield: 'UPdatedBy' },
                        //{ text: 'Updated DateTime', datafield: 'UpdatedDateTime', cellsformat: 'dd/MM/yyyy' },

                    ]
                });

       //=============end error

        //End Valid and Invalid Grid Vijay

         document.getElementById("Done").addEventListener("click", function(){
         window.location.href="/LFSSectionItems/Index";
        $('#dialog').dialog('close');
    });


        $.ajax({
            data: { path: window.location.pathname },
            url: "Home/SaveReturnPath",
            cache: false,
            dataType: "json",
            type: "post",
            success: function (data) { },
            error: function (respose) {
                //  alert("error : " + reponse);
            }
        });

        if ('@TempData["Error"]') {
            alert('@TempData["Error"]')
        }

        var source = {
            dataType: "json",
            cache: false,
            dataFields: [
                { name: 'Id', type: 'string' },
             
               // { name: 'SurveyId', type: 'string' },
                { name: 'Survey', type: 'string' },
                { name: 'ChapterCode', type: 'string' },
                { name: 'SectionCode', type: 'string' },
                { name: 'QuestionCode', type: 'string' },
                { name: 'TableCode', type: 'string' },
               // { name: 'ItemTypeId', type: 'string' },
                { name: 'ItemTypeName', type: 'string' },
                { name: 'ItemText', type: 'string' },
                { name: 'Ordinal', type: 'string' },
                { name: 'NestingLevel', type: 'string' },
                { name: 'IsResponseMandatory', type: 'string' },
                { name: 'IsReponseAutoGenerated', type: 'string' },
                { name: 'ShowOnQuestionCode', type: 'string' },
                { name: 'ShowOnAnswerOption', type: 'string' },
                { name: 'SumOfQuestions', type: 'string' },
                { name: 'Operator', type: 'string' },
                { name: 'SumValue', type: 'string' },
                { name: 'AutomatedResponseTrueValue', type: 'string' },
                { name: 'AutomatedResponseFalseValue', type: 'string' },
                { name: 'RelatedQuestionCode', type: 'string' },
                { name: 'ShowOnAccountingMemo', type: 'string' },
                { name: 'InternalNotes', type: 'string' },
               { name: 'UploadedOn', type: 'string' },
                { name: 'CreatedBy', type: 'string' },
                { name: 'UpdatedBy', type: 'string' },
                { name: 'CreatedDateTime', type: 'date' },
                { name: 'UpdatedDateTime', type: 'date' },
            ],

            id: "Id",
            url: "/LFSSectionItems/GetSectionItem"
        };
        // This function is used for displaying row details
        var initrowdetails = function (index, parentElement, gridElement, datarecord) {
            //var tabsdiv = null;
            //var information = null;
            //var Attributes = null;
            //var Description = null;
            // debugger;
            //tabsdiv = $($(parentElement).children()[0]);
            //if (tabsdiv != null) {
            //    information = tabsdiv.find('.information');
            //    Attributes = tabsdiv.find('.Attributes');
            //    Description = tabsdiv.find('.Description');

            //  var title = tabsdiv.find('.title');
            //  title.text(datarecord.firstname);

            //var container = $('<div style="margin: 5px;"></div>')
            //container.appendTo($(information));

            //var leftcolumn = $('<div style="float: left; width: 45%;"></div>');
            //var rightcolumn = $('<div style="float: left; width: 40%;"></div>');
            //container.append(leftcolumn);
            //container.append(rightcolumn);
           // var SurveyId = "<div style='margin: 10px;'><b>SurveyId:</b> " + datarecord.SurveyId + "</div>";
           var Survey = "<div style='margin: 10px;'><b>Survey:</b> " + datarecord.Survey + "</div>";
            var ChapterCode = "<div style='margin: 10px;'><b>ChapterCode:</b> " + datarecord.ChapterCode + "</div>";
            var SectionCode = "<div style='margin: 10px;'><b>SectionCode:</b> " + datarecord.SectionCode + "</div>";
            var QuestionCode = "<div style='margin: 10px;'><b>QuestionCode:</b> " + datarecord.QuestionCode + "</div>";
            var TableCode = "<div style='margin: 10px;'><b>TableCode:</b> " + datarecord.TableCode + "</div>";
            //var ItemTypeId = "<div style='margin: 10px;'><b>ItemTypeId:</b> " + datarecord.ItemTypeId + "</div>";
            var ItemTypeName = "<div style='margin: 10px;'><b>ItemTypeName:</b> " + datarecord.ItemTypeName + "</div>";
          
            var ItemText = "<div style='margin: 10px;'><b>ItemText:</b> " + datarecord.ItemText + "</div>";
            var Ordinal = "<div style='margin: 10px;'><b>Ordinal:</b> " + datarecord.Ordinal + "</div>";
            var NestingLevel = "<div style='margin: 10px;'><b>NestingLevel:</b> " + datarecord.NestingLevel + "</div>";
            var IsResponseMandatory = "<div style='margin: 10px;'><b>IsResponseMandatory:</b> " + datarecord.IsResponseMandatory + "</div>";
            var IsReponseAutoGenerated = "<div style='margin: 10px;'><b>IsReponseAutoGenerated:</b> " + datarecord.IsReponseAutoGenerated + "</div>";
            var ShowOnQuestionCode = "<div style='margin: 10px;'><b>ShowOnQuestionCode:</b> " + datarecord.ShowOnQuestionCode + "</div>";
            var ShowOnAnswerOption = "<div style='margin: 10px;'><b>ShowOnAnswerOption:</b> " + datarecord.ShowOnAnswerOption + "</div>";
            var SumOfQuestions = "<div style='margin: 10px;'><b>SumOfQuestions:</b> " + datarecord.SumOfQuestions + "</div>"; 
            var Operator = "<div style='margin: 10px;'><b>Operator:</b> " + datarecord.Operator + "</div>";
            var SumValue = "<div style='margin: 10px;'><b>SumValue:</b> " + datarecord.SumValue + "</div>";
            var AutomatedResponseTrueValue = "<div style='margin: 10px;'><b>AutomatedResponseTrueValue:</b> " + datarecord.AutomatedResponseTrueValue + "</div>";
            var AutomatedResponseFalseValue = "<div style='margin: 10px;'><b>AutomatedResponseFalseValue:</b> " + datarecord.AutomatedResponseFalseValue + "</div>";
            var RelatedQuestionCode = "<div style='margin: 10px;'><b>RelatedQuestionCode:</b> " + datarecord.RelatedQuestionCode + "</div>";
            var ShowOnAccountingMemo = "<div style='margin: 10px;'><b>ShowOnAccountingMemo:</b> " + datarecord.ShowOnAccountingMemo + "</div>";
            var InternalNotes = "<div style='margin: 10px;'><b>InternalNotes:</b> " + datarecord.InternalNotes + "</div>";

            //$().append(SurveyId);
            $().append(Survey);

            $().append(ChapterCode);
            $().append(SectionCode);
            $().append(QuestionCode);
            $().append(TableCode);
           // $().append(ItemTypeId);
            $().append(ItemTypeName);
            $().append(ItemText);

            $().append(Ordinal);
            $().append(NestingLevel);
            $().append(IsResponseMandatory);
            $().append(IsReponseAutoGenerated);
            $().append(ShowOnQuestionCode);
            $().append(ShowOnAnswerOption);
            $().append(Operator);
            $().append(SumValue);
            $().append(AutomatedResponseTrueValue);
            $().append(AutomatedResponseFalseValue);
            $().append(RelatedQuestionCode);
            $().append(ShowOnAccountingMemo);
            $().append(InternalNotes);

            var CreatedBy = "<div style='margin: 10px;'><b>CreatedBy:</b> " + datarecord.CreatedBy + "</div>";
            var CreatedDateTime = "<div style='margin: 10px;'><b>CreatedDateTime:</b> " + datarecord.CreatedDateTime + "</div>";
            var UpdatedBy = "<div style='margin: 10px;'><b>UpdatedBy:</b> " + datarecord.UpdatedBy + "</div>";
            var UpdateDateTime = "<div style='margin: 10px; '><b>UpdatedDateTime:</b> " + datarecord.UpdatedDateTime + "</div>";
            $().append(CreatedBy);
            $().append(CreatedDateTime);
            $().append(UpdatedBy);
            $().append(UpdateDateTime);



        }
   // }

               var dataAdapter = new $.jqx.dataAdapter(source)

               $('#jqxgrid').jqxGrid({


                    source: dataAdapter,
                    width: '100%',
                    autoheight: true,
                    rowdetails: true,
                    //rowdetailstemplate: { rowdetails: "<div style='margin: 10px;'><ul style='margin-left: 30px;'><li class='title'>WF</li><li>Attributes</li><li>Description</li></ul><div class='information'></div><div class='Attributes'></div><div class='Description'></div>", rowdetailsheight: 300 },
                    //ready: function () {
                    //    $("#jqxgrid").jqxGrid('showrowdetails', 0);
                    //    $("#jqxgrid").jqxGrid('showrowdetails', 1);
                       // $('#jqxgrid').jqxGrid('autoresizecolumns',Name);
                    //},
                    initrowdetails: initrowdetails,
                    theme: 'bootstrap',
                    sortable: true,
                    columnsresize: true,
                    columnsreorder: true,
                    altrows: true,
                    pageable: true,
                    filterable: true,
                    autoshowcolumnsmenubutton: false,//down arrow always visible for filter and sorting
                    showstatusbar: false,
                    ready: function () {
                           //$("#jqxgrid").jqxGrid('autoresizecolumns' );
                        $("#jqxgrid").jqxGrid('autoresizecolumns');

                    },

                    columns: [
                        //{ text: 'Id#', datafield: 'Id' },
                      //  { text: 'SurveyId', datafield: 'SurveyId', width: 100 },
                       { text: 'Survey', datafield: 'Survey', width: 100 },
                        { text: 'ChapterCode', datafield: 'ChapterCode', width: 100 },
                        { text: 'SectionCode', datafield: 'SectionCode', width: 100 },
                        { text: 'QuestionCode', datafield: 'QuestionCode', width: 100 },
                        { text: 'TableCode', datafield: 'TableCode', width: 100 },
                        //{ text: 'ItemTypeId', datafield: 'ItemTypeId', width: 100 },
                        { text: 'ItemTypeName', datafield: 'ItemTypeName', width: 100 },
                        { text: 'ItemText', datafield: 'ItemText', width: 100 },
                        { text: 'Ordinal', datafield: 'Ordinal', width: 100 },
                        { text: 'NestingLevel', datafield: 'NestingLevel', width: 100 },
                        { text: 'IsResponseMandatory', datafield: 'IsResponseMandatory', width: 100 },
                        { text: 'IsReponseAutoGenerated', datafield: 'IsReponseAutoGenerated', width: 100 },
                        { text: 'ShowOnQuestionCode', datafield: 'ShowOnQuestionCode', width: 100 },
                        { text: 'ShowOnAnswerOption', datafield: 'ShowOnAnswerOption', width: 100 },
                        { text: 'SumOfQuestions', datafield: 'SumOfQuestions', width: 100 },
                        { text: 'Operator', datafield: 'Operator', width: 100 },
                        { text: 'SumValue', datafield: 'SumValue', width: 100 },
                        { text: 'AutomatedResponseTrueValue', datafield: 'AutomatedResponseTrueValue', width: 100 },
                        { text: 'AutomatedResponseFalseValue', datafield: 'AutomatedResponseFalseValue', width: 100 },
                        { text: 'RelatedQuestionCode', datafield: 'RelatedQuestionCode', width: 100 },
                        { text: 'ShowOnAccountingMemo', datafield: 'ShowOnAccountingMemo', width: 100 },
                        { text: 'InternalNotes', datafield: 'InternalNotes', width: 100 },
                        //{ text: 'CreatedBy', datafield: 'CreatedBy' },
                        { text: 'Uploaded On', datafield: 'CreatedDateTime', width: 120, cellsformat: 'dd/MM/yyyy' },
                        //{ text: 'UpdatedBy', datafield: 'UPdatedBy' },
                        //{ text: 'Updated DateTime', datafield: 'UpdatedDateTime', cellsformat: 'dd/MM/yyyy' },

                    ]
               });

               // this file download only Google Chrome browser
               //$("#csvExport").jqxButton();
               //$("#csvExport").click(function () {
               //    $("#jqxgrid").jqxGrid('exportdata', 'csv', 'SectionItems');
               //});
            });


        // Following Coding Done By Vijay

// To Download Template
     function DownloadTemplate()
    {

      window.location.href='/LFSSectionItems/DownloadTemplate';

    }

        //Add Types Function

    function SaveValidRecords()
    {
        var GridArray = [];
        var GridRows = $('#jqxgridValidRecords').jqxGrid('getrows')
        var collength = 21;
        if (GridRows.length > 0) {
            for (var i = 0; i < GridRows.length; i++) {              //For Row
                GridArray[i] = [];
                var IdVal = 0;
                //GridArray[i][0] = 'SurveyId:' + String(GridRows[i].SurveyId);
                GridArray[i][0] = 'Survey:' + String(GridRows[i].Survey);
                GridArray[i][1] = 'ChapterCode:' + String(GridRows[i].ChapterCode);
                GridArray[i][2] = 'SectionCode:' + String(GridRows[i].SectionCode);
                GridArray[i][3] = 'QuestionCode:' + String(GridRows[i].QuestionCode);
                GridArray[i][4] = 'TableCode:' + String(GridRows[i].TableCode);
                //GridArray[i][6] = 'ItemTypeId:' + String(GridRows[i].ItemTypeId);
              GridArray[i][5] = 'ItemTypeName:' + String(GridRows[i].ItemTypeName);
                GridArray[i][6] = 'ItemText:' + String(GridRows[i].ItemText);
                GridArray[i][7] = 'Ordinal:' + String(GridRows[i].Ordinal);
                GridArray[i][8] = 'NestingLevel:' + String(GridRows[i].NestingLevel);
                GridArray[i][9] = 'IsResponseMandatory:' + Boolean(GridRows[i].IsResponseMandatory);
                GridArray[i][10] = 'IsReponseAutoGenerated:' + Boolean(GridRows[i].IsReponseAutoGenerated);
                GridArray[i][11] = 'ShowOnQuestionCode:' + String(GridRows[i].ShowOnQuestionCode);
                GridArray[i][12] = 'ShowOnAnswerOption:' + String(GridRows[i].ShowOnAnswerOption);
                GridArray[i][13] = 'SumOfQuestions:' + String(GridRows[i].SumOfQuestions);
                GridArray[i][14] = 'Operator:' + String(GridRows[i].Operator);
                GridArray[i][15] = 'SumValue:' + String(GridRows[i].SumValue);
                GridArray[i][16] = 'AutomatedResponseTrueValue:' + String(GridRows[i].AutomatedResponseTrueValue);
                GridArray[i][17] = 'AutomatedResponseFalseValue:' + String(GridRows[i].AutomatedResponseFalseValue);
                GridArray[i][18]= 'RelatedQuestionCode:' + String(GridRows[i].RelatedQuestionCode);
                GridArray[i][19] = 'ShowOnAccountingMemo:' + Boolean(GridRows[i].ShowOnAccountingMemo);
                GridArray[i][20] = 'InternalNotes:' + String(GridRows[i].InternalNotes);
            }
        }
        $.ajax({
            data: "GridArray=" + GridArray + "&collength=" + collength,
            cache : false,
            url: "/LFSSectionItems/SaveData",
            type: "POST",
            success: function (data) {
                if (data.ErrorMessage) {
                    alert(data.ErrorMessage)
                    window.location.href = "/LFSSectionItems/Index";
                } else {

                    alert('Data Saved Successfully.');
                    window.location.href = "/LFSSectionItems/Index";
                }
            },
            error: function (reponse) {
                //  alert("error : " + reponse);
            }
        });
     }

    //DownloadSectionItems
    function DownloadSectionItems() {
        window.location.href = '/LFSSectionItems/DownloadSectionItems';
    }

</script>

<body class="jqx-layout-group-default">
    <div id="jqxWidget" style="font-size:13px; font-family: Verdana; float: left;">
        <div id="jqxgrid"></div>
        @*<div style="margin-top: 10px;">
            <div style="margin-left:10px; float: left;">
                <input type="button" id="csvExport" value="Export to CSV" onclick="DownloadSectionItems();" />
            </div>

        </div>*@
    </div>

    <div id="VallidInvalidGrid" class="col-md-12 col-lg-12">

        <div id="InValidDatadiv" class="tab-content" style="padding:10px;">
            <h2 id="HeadingInValid">Invalid Records</h2>
            <div id="jqxgridInvalidRecords"></div>
        </div>

        <div id="ValidDataDiv" class="tab-content" style="padding:10px;">
            <h2 id="HeadingValid">Valid Records</h2>
            <div id="jqxgridValidRecords"></div>
            <br />
            <button type="submit" class="btn btn-red btn-cons" id="btnSaveValidRecords" name="save" onclick="SaveValidRecords();"><b>Save Valid Records&nbsp;</b></button>

        </div>

    </div>

</body>
